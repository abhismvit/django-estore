{% extends "base.html" %}

{% block content %}
    <div class="row">
        <div class="col-sm-8">
            <h2>{{ object.title }}</h2>
            {% if object.get_image_url %}
                <div>
                    <img class="img-responsive" src="{{ object.get_image_url }}">
                </div>
            {% endif %}
            <p class="lead">
                {{ object.description }}
            </p>
        </div>
        <!--Product Sidebar-->
        <div class="col-sm-4">
            {% if object.variation_set.count > 1 %}
                <h3 id="price">{{ object.price }}</h3>
                <select class="form-control variation_select">
                    {% for variation in object.variation_set.all %}
                        <option data-sale-price="{{ variation.sale_price }}" data-price="{{ variation.price }}" value="{{ variation.id }}">
                            {{ variation }}
                        </option>
                    {% endfor %}
                </select>
            {% else %}
                <h3 id="price">
                {% if object.variation_set.first.sale_price %}
                    {{ object.variation_set.first.sale_price }}
                    <small class="og-price">{{ object.variation_set.first.price }}</small>
                {% else %}
                    {{ object.variation_set.first.price }}
                {% endif %}
                </h3>
            {% endif %}
            <br>
            <a href="#">Add to Cart</a>
            <br><hr>
            <p>
                Share<br>
                <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}">
                    <i class="fa fa-facebook-square fa-3x" aria-hidden="true"></i>
                </a>
            </p>
            <h4>Related Products</h4>
        <div class="row">
            {% for product in related %}
                <div class="thumbnail col-xs-6">
                    <h4 class="text-align-center">
                        <a href="{{ product.get_absolute_url }}">{{ product.title }}</a>
                    </h4>
                    {% if product.get_image_url %}
                        <img class="img-responsive" src="{{ product.get_image_url }}">
                    {% endif %}
                </div>
                {% cycle '' '</div><div class="row">' %}
            {% endfor %}
        </div>
        </div>
        <!--End Product Sidebar-->
    </div>
{% endblock %}

{% block pageJs %}
    {% load static %}
    <script src="{% static 'js/product_details.js' %}"></script>
{% endblock %}
